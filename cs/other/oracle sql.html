<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>oracle | LeeHon&#39;blog</title>
    <meta name="description" content="。。。。。。">
    <link rel="icon" href="/avatar.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    
    <link rel="preload" href="/assets/css/styles.styles.68f6f5b3.css" as="style"><link rel="preload" href="/assets/js/app.c7910e17.js" as="script"><link rel="preload" href="/assets/js/18.5ade4bbb.js" as="script"><link rel="prefetch" href="/assets/js/0.0a69bee2.js"><link rel="prefetch" href="/assets/js/1.cbd15ca8.js"><link rel="prefetch" href="/assets/js/10.bee20cc5.js"><link rel="prefetch" href="/assets/js/100.6226807f.js"><link rel="prefetch" href="/assets/js/101.f4a5a3e8.js"><link rel="prefetch" href="/assets/js/102.6894d166.js"><link rel="prefetch" href="/assets/js/103.57942776.js"><link rel="prefetch" href="/assets/js/104.103af317.js"><link rel="prefetch" href="/assets/js/105.dfb8da7e.js"><link rel="prefetch" href="/assets/js/106.2eb66fb6.js"><link rel="prefetch" href="/assets/js/107.fb0c21b5.js"><link rel="prefetch" href="/assets/js/108.b8d5d801.js"><link rel="prefetch" href="/assets/js/109.d0822494.js"><link rel="prefetch" href="/assets/js/11.617b11a5.js"><link rel="prefetch" href="/assets/js/110.cb82d20f.js"><link rel="prefetch" href="/assets/js/111.c266b66a.js"><link rel="prefetch" href="/assets/js/112.0d25e281.js"><link rel="prefetch" href="/assets/js/113.adb0561d.js"><link rel="prefetch" href="/assets/js/114.4d6d0364.js"><link rel="prefetch" href="/assets/js/115.d24e950a.js"><link rel="prefetch" href="/assets/js/116.863b14e9.js"><link rel="prefetch" href="/assets/js/117.104fc81b.js"><link rel="prefetch" href="/assets/js/118.859bf3e8.js"><link rel="prefetch" href="/assets/js/119.9a740d5a.js"><link rel="prefetch" href="/assets/js/12.955306d4.js"><link rel="prefetch" href="/assets/js/120.4ce626da.js"><link rel="prefetch" href="/assets/js/121.fcb2a3e5.js"><link rel="prefetch" href="/assets/js/122.587191a8.js"><link rel="prefetch" href="/assets/js/123.c524257c.js"><link rel="prefetch" href="/assets/js/124.2f32ba80.js"><link rel="prefetch" href="/assets/js/125.9f817929.js"><link rel="prefetch" href="/assets/js/126.5a44c991.js"><link rel="prefetch" href="/assets/js/127.62ac9340.js"><link rel="prefetch" href="/assets/js/128.b28f4d25.js"><link rel="prefetch" href="/assets/js/129.63e2d8f8.js"><link rel="prefetch" href="/assets/js/13.cb231efb.js"><link rel="prefetch" href="/assets/js/130.a31befc3.js"><link rel="prefetch" href="/assets/js/131.ca67e305.js"><link rel="prefetch" href="/assets/js/132.d1b320aa.js"><link rel="prefetch" href="/assets/js/133.fce2bbbf.js"><link rel="prefetch" href="/assets/js/134.82285b20.js"><link rel="prefetch" href="/assets/js/135.7a0190c5.js"><link rel="prefetch" href="/assets/js/136.10cd4dde.js"><link rel="prefetch" href="/assets/js/137.0fa57d69.js"><link rel="prefetch" href="/assets/js/138.1dc20e85.js"><link rel="prefetch" href="/assets/js/139.55b2b0de.js"><link rel="prefetch" href="/assets/js/14.8be44170.js"><link rel="prefetch" href="/assets/js/140.a3576f53.js"><link rel="prefetch" href="/assets/js/141.ae4d0da0.js"><link rel="prefetch" href="/assets/js/142.ce2ed58c.js"><link rel="prefetch" href="/assets/js/143.0424175e.js"><link rel="prefetch" href="/assets/js/144.54963a32.js"><link rel="prefetch" href="/assets/js/145.26267247.js"><link rel="prefetch" href="/assets/js/146.175e4e41.js"><link rel="prefetch" href="/assets/js/147.f6c47b14.js"><link rel="prefetch" href="/assets/js/148.f2ce56bf.js"><link rel="prefetch" href="/assets/js/149.59828644.js"><link rel="prefetch" href="/assets/js/15.54a036ea.js"><link rel="prefetch" href="/assets/js/150.2e9ec512.js"><link rel="prefetch" href="/assets/js/151.c5d3c386.js"><link rel="prefetch" href="/assets/js/152.31eeaaf7.js"><link rel="prefetch" href="/assets/js/153.4c5d13f2.js"><link rel="prefetch" href="/assets/js/154.26206818.js"><link rel="prefetch" href="/assets/js/155.a573a91a.js"><link rel="prefetch" href="/assets/js/156.8f151e7b.js"><link rel="prefetch" href="/assets/js/157.f238a1d5.js"><link rel="prefetch" href="/assets/js/158.33fcadda.js"><link rel="prefetch" href="/assets/js/159.f1f9d1a1.js"><link rel="prefetch" href="/assets/js/16.e5ba3555.js"><link rel="prefetch" href="/assets/js/160.7b554df8.js"><link rel="prefetch" href="/assets/js/161.14acb5c1.js"><link rel="prefetch" href="/assets/js/162.36010599.js"><link rel="prefetch" href="/assets/js/163.5d9e9e53.js"><link rel="prefetch" href="/assets/js/164.98e0feaa.js"><link rel="prefetch" href="/assets/js/165.95f44eee.js"><link rel="prefetch" href="/assets/js/166.1b818f10.js"><link rel="prefetch" href="/assets/js/167.34c6e1c1.js"><link rel="prefetch" href="/assets/js/168.acac0bf2.js"><link rel="prefetch" href="/assets/js/169.269a0e2a.js"><link rel="prefetch" href="/assets/js/17.d756230b.js"><link rel="prefetch" href="/assets/js/19.8713e4a1.js"><link rel="prefetch" href="/assets/js/2.44277c1f.js"><link rel="prefetch" href="/assets/js/20.593f114c.js"><link rel="prefetch" href="/assets/js/21.4c2fe98e.js"><link rel="prefetch" href="/assets/js/22.9ac1dc84.js"><link rel="prefetch" href="/assets/js/23.87815dc8.js"><link rel="prefetch" href="/assets/js/24.f320f43b.js"><link rel="prefetch" href="/assets/js/25.678fd8be.js"><link rel="prefetch" href="/assets/js/26.ecf15294.js"><link rel="prefetch" href="/assets/js/27.95d55fab.js"><link rel="prefetch" href="/assets/js/28.48a9f416.js"><link rel="prefetch" href="/assets/js/29.6ccd0b14.js"><link rel="prefetch" href="/assets/js/3.cc491620.js"><link rel="prefetch" href="/assets/js/30.d4274369.js"><link rel="prefetch" href="/assets/js/31.837b34c8.js"><link rel="prefetch" href="/assets/js/32.68c090d2.js"><link rel="prefetch" href="/assets/js/33.23de0d7e.js"><link rel="prefetch" href="/assets/js/34.5b6484b8.js"><link rel="prefetch" href="/assets/js/35.d340a14e.js"><link rel="prefetch" href="/assets/js/36.6231ab0c.js"><link rel="prefetch" href="/assets/js/37.fd4b2c63.js"><link rel="prefetch" href="/assets/js/38.c17f1b94.js"><link rel="prefetch" href="/assets/js/39.8cc2fa26.js"><link rel="prefetch" href="/assets/js/4.b0db0ca3.js"><link rel="prefetch" href="/assets/js/40.fa89274c.js"><link rel="prefetch" href="/assets/js/41.e6c4f696.js"><link rel="prefetch" href="/assets/js/42.b91d54e8.js"><link rel="prefetch" href="/assets/js/43.9b67be5f.js"><link rel="prefetch" href="/assets/js/44.2f861eb2.js"><link rel="prefetch" href="/assets/js/45.19b1ba3b.js"><link rel="prefetch" href="/assets/js/46.d200846c.js"><link rel="prefetch" href="/assets/js/47.0c77f2fb.js"><link rel="prefetch" href="/assets/js/48.06ed69fe.js"><link rel="prefetch" href="/assets/js/49.115538c6.js"><link rel="prefetch" href="/assets/js/5.6317d5bb.js"><link rel="prefetch" href="/assets/js/50.0ebf5b23.js"><link rel="prefetch" href="/assets/js/51.50413550.js"><link rel="prefetch" href="/assets/js/52.aefa53f7.js"><link rel="prefetch" href="/assets/js/53.cc28d3e8.js"><link rel="prefetch" href="/assets/js/54.f910e33d.js"><link rel="prefetch" href="/assets/js/55.743378a5.js"><link rel="prefetch" href="/assets/js/56.601e2624.js"><link rel="prefetch" href="/assets/js/57.df59165e.js"><link rel="prefetch" href="/assets/js/58.ea37a94b.js"><link rel="prefetch" href="/assets/js/59.d0e147bb.js"><link rel="prefetch" href="/assets/js/6.880976bc.js"><link rel="prefetch" href="/assets/js/60.b0c659d7.js"><link rel="prefetch" href="/assets/js/61.07a6a138.js"><link rel="prefetch" href="/assets/js/62.66275d9f.js"><link rel="prefetch" href="/assets/js/63.c1ef9b21.js"><link rel="prefetch" href="/assets/js/64.d26a4ce4.js"><link rel="prefetch" href="/assets/js/65.5de15c1a.js"><link rel="prefetch" href="/assets/js/66.9adfee93.js"><link rel="prefetch" href="/assets/js/67.8d56663f.js"><link rel="prefetch" href="/assets/js/68.1a554919.js"><link rel="prefetch" href="/assets/js/69.7eacc59b.js"><link rel="prefetch" href="/assets/js/7.eecac8df.js"><link rel="prefetch" href="/assets/js/70.741af3ea.js"><link rel="prefetch" href="/assets/js/71.9ff5d4fb.js"><link rel="prefetch" href="/assets/js/72.5368df4d.js"><link rel="prefetch" href="/assets/js/73.d3782b26.js"><link rel="prefetch" href="/assets/js/74.892ee93c.js"><link rel="prefetch" href="/assets/js/75.48fbb7c0.js"><link rel="prefetch" href="/assets/js/76.cda2dd0c.js"><link rel="prefetch" href="/assets/js/77.fb40ddd4.js"><link rel="prefetch" href="/assets/js/78.b50e82f7.js"><link rel="prefetch" href="/assets/js/79.876767da.js"><link rel="prefetch" href="/assets/js/8.30817a78.js"><link rel="prefetch" href="/assets/js/80.7e4f8ce9.js"><link rel="prefetch" href="/assets/js/81.618f991c.js"><link rel="prefetch" href="/assets/js/82.8caa7f19.js"><link rel="prefetch" href="/assets/js/83.5e9bc57c.js"><link rel="prefetch" href="/assets/js/84.033ea1fa.js"><link rel="prefetch" href="/assets/js/85.4e932795.js"><link rel="prefetch" href="/assets/js/86.ab844b56.js"><link rel="prefetch" href="/assets/js/87.60f5200b.js"><link rel="prefetch" href="/assets/js/88.65cbe31a.js"><link rel="prefetch" href="/assets/js/89.13d60d51.js"><link rel="prefetch" href="/assets/js/9.318b73e1.js"><link rel="prefetch" href="/assets/js/90.0c030d2a.js"><link rel="prefetch" href="/assets/js/91.3dc3252b.js"><link rel="prefetch" href="/assets/js/92.4b878383.js"><link rel="prefetch" href="/assets/js/93.8bef3555.js"><link rel="prefetch" href="/assets/js/94.ecdb6e60.js"><link rel="prefetch" href="/assets/js/95.d783d73b.js"><link rel="prefetch" href="/assets/js/96.0956ffc3.js"><link rel="prefetch" href="/assets/js/97.3c5df0bb.js"><link rel="prefetch" href="/assets/js/98.bf652974.js"><link rel="prefetch" href="/assets/js/99.c9c29aa6.js">
    <link rel="stylesheet" href="/assets/css/styles.styles.68f6f5b3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">LeeHon'blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link">前端</a></div><div class="nav-item"><a href="/website/" class="nav-link">网站导航</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/js/" class="nav-link">前端</a></div><div class="nav-item"><a href="/website/" class="nav-link">网站导航</a></div> <!----></nav>  <!----> </div> <div class="page"> <div class="content"><h1 id="oracle"><a href="#oracle" aria-hidden="true" class="header-anchor">#</a> oracle</h1> <p>结构化查询语言 SQL</p> <p>非关系型数据库 Nosql</p> <h2 id="oracle-体系结构"><a href="#oracle-体系结构" aria-hidden="true" class="header-anchor">#</a> oracle 体系结构</h2> <h3 id="概念"><a href="#概念" aria-hidden="true" class="header-anchor">#</a> 概念</h3> <p>实例：一组oracle后台进程以及在服务器中分配的共享内存区域。</p> <p>数据库：基于磁盘的数据文件，控制文件，日志文件，参数文件，归档日志文件等组成的物理文件集合。</p> <p>数据库服务器：管理数据库的各种软件工具。</p> <h3 id="逻辑存储结构"><a href="#逻辑存储结构" aria-hidden="true" class="header-anchor">#</a> 逻辑存储结构</h3> <ul><li>数据块：最小的逻辑单位，也是执行数据库输入输出操作的最小存储单位。数据块有标准大小，DB_BLOCK_SIZE。可以存放表数据，索引数据。</li> <li>数据区：一组连续的数据块组成，存储分配的最小单位。用来保存特定数据类型的数据，数据增长的基本单位。</li> <li>段：一个或多个数据区组成一个段，当段中的存储空间被用光后，将分配给这个段一个新的数据区。独立的逻辑存储结构。</li> <li>表空间：最大逻辑划分区域，一个表空间由一个或多个数据文件组成，一个数据文件只属于一个表空间。</li></ul> <h3 id="物理存储结构"><a href="#物理存储结构" aria-hidden="true" class="header-anchor">#</a> 物理存储结构</h3> <ul><li>数据文件：用于保存用户应用程序数据和Oracle系统内部数据的文件</li> <li>控制文件：一个二进制文件，它记录了数据库的物理结构，其中主要包含数据库名、数据文件与日志文件的名字和位置、数据库建立日期等信息。</li> <li>日志文件：记录对数据所作的修改</li> <li>服务器参数文件</li> <li>密码文件，警告文件和跟踪文件</li></ul> <h3 id="oracle-11g-服务器结构"><a href="#oracle-11g-服务器结构" aria-hidden="true" class="header-anchor">#</a> oracle 11g 服务器结构</h3> <ul><li>系统全局区（SGA）：所有用户进程共享的一块内存区域，也就是说，SGA中的数据资源可以被多个用户进程共同使用。SGA主要由高速数据缓冲区、共享池、重做日志缓存区、java池和大型池等内存结构组成。SGA随着数据库实例的启动而加载到内存中，当数据库实例关闭时，SGA区域也就消失了。</li> <li>程序全局区：在程序全局区（PGA）中，一个服务进程只能访问属于它自己的那部分PGA资源区，各个服务进程的PGA区的总和即为实例的PGA区的大小。通常PGA区由私有SQL区和会话区组成。</li> <li>前台进程
<ul><li>用户进程：能够产生或执行SQL语句的应用程序。</li> <li>服务器进程：用于处理用户会话过程中向数据库实例发出的SQL语句或sql plus 命令</li></ul></li> <li>后台进程：一组运行于oracle服务器端的后台程序。</li></ul> <h3 id="数据字典"><a href="#数据字典" aria-hidden="true" class="header-anchor">#</a> 数据字典</h3> <h2 id="语句"><a href="#语句" aria-hidden="true" class="header-anchor">#</a> 语句</h2> <h3 id="选择，连接，投影"><a href="#选择，连接，投影" aria-hidden="true" class="header-anchor">#</a> 选择，连接，投影</h3> <h3 id="数据表"><a href="#数据表" aria-hidden="true" class="header-anchor">#</a> 数据表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> XS_JSJ	<span class="token keyword">AS</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> XSBWHERE 专业<span class="token operator">=</span> <span class="token string">'计算机'</span> <span class="token punctuation">;</span>
</code></pre></div><h3 id="增删改查"><a href="#增删改查" aria-hidden="true" class="header-anchor">#</a> 增删改查</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> 			<span class="token comment">// 可以使用 as //可以使用表达式作为结果  //可以使用DISTINCT 消除重复行</span>
	<span class="token keyword">from</span> <span class="token keyword">table</span>						<span class="token comment">// 查询对象可以是表，也可以是where返回的结果集</span>
	<span class="token keyword">where</span>                 <span class="token comment">// 筛选行 // 子查询 使用 in exist  // 比较子查询 ALL SOME ANY  // exists </span>
	<span class="token keyword">group</span> <span class="token keyword">by</span> 
	<span class="token keyword">having</span>                <span class="token comment">// 可以使用统计函数</span>
	<span class="token keyword">order</span> <span class="token keyword">by</span>							<span class="token comment">// 排序</span>
</code></pre></div><h3 id="连接"><a href="#连接" aria-hidden="true" class="header-anchor">#</a> 连接</h3> <ul><li>连接谓词</li> <li>JOIN 关键字指定的连接
<ul><li>内连接</li> <li>外连接</li> <li>交叉连接</li></ul></li></ul> <h3 id="子查询"><a href="#子查询" aria-hidden="true" class="header-anchor">#</a> 子查询</h3> <ul><li>种类
<ul><li>in</li> <li>ALL SOME ANY  比较子查询</li> <li>Exists</li></ul></li> <li>返回类型
<ul><li>单行单列：单值数据</li> <li>单行多列：</li> <li>多行单列：</li> <li>多行多列：一张临时表</li></ul></li> <li>使用场景
<ul><li>where</li> <li>having</li> <li>from</li></ul></li></ul> <h3 id="统计函数"><a href="#统计函数" aria-hidden="true" class="header-anchor">#</a> 统计函数</h3> <ul><li>SUM和AVG</li> <li>MAX和MIN</li> <li>count</li></ul> <h3 id="合并"><a href="#合并" aria-hidden="true" class="header-anchor">#</a> 合并</h3> <ul><li>所有查询中的列数和列的顺序必须相同</li> <li>数据类型必须兼容</li></ul> <h3 id="替换变量"><a href="#替换变量" aria-hidden="true" class="header-anchor">#</a> 替换变量</h3> <p>&amp;</p> <h3 id="define-和-accept"><a href="#define-和-accept" aria-hidden="true" class="header-anchor">#</a> DEFINE 和 ACCEPT</h3> <h3 id="单行函数"><a href="#单行函数" aria-hidden="true" class="header-anchor">#</a> 单行函数</h3> <ul><li>字符函数</li> <li>数值函数</li> <li>日期函数</li> <li>转换函数</li> <li>通用函数</li></ul> <h3 id="数据库完整性"><a href="#数据库完整性" aria-hidden="true" class="header-anchor">#</a> 数据库完整性</h3> <ul><li>数据库完整性约束：保护数据正确性和相容性的一种手段
<ul><li>完整性：防止数据库中存在不符合语义的数据，防止数据库中存在不正确。</li> <li>安全性：保护数据库防止恶意破坏和非法存取。</li> <li>数据完整性分类
<ul><li>域完整性</li> <li>实体完整性</li> <li></li></ul></li></ul></li> <li>常用约束
<ul><li>非空约束    not null</li> <li>唯一约束    unique</li> <li>主键约束   primary key</li> <li>检查约束   check</li> <li>主外键约束  foreign key</li></ul></li> <li>查看约束</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Select</span> constraint_name<span class="token punctuation">,</span> constraint_type<span class="token punctuation">,</span> table_name <span class="token keyword">from</span> user_constraint
</code></pre></div><ul><li><p>修改约束</p> <ul><li><p>添加约束</p></li> <li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">add</span><span class="token punctuation">(</span> <span class="token keyword">constraint</span> 约束名称 约束类型（约束字段）<span class="token punctuation">)</span>
<span class="token keyword">Alter</span> <span class="token keyword">table</span> 表名称 midify<span class="token punctuation">(</span> 列明 <span class="token punctuation">[</span><span class="token operator">not</span><span class="token punctuation">]</span> <span class="token boolean">null</span> <span class="token punctuation">)</span>			
</code></pre></div></li> <li><p>启用/禁用约束</p></li> <li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">disable</span> <span class="token keyword">constraint</span> 约束名称 <span class="token punctuation">[</span><span class="token keyword">cascade</span><span class="token punctuation">]</span>
<span class="token keyword">Alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">enable</span> <span class="token keyword">constraint</span> 约束名称 
</code></pre></div></li> <li><p>删除约束</p></li> <li><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">Alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">drop</span> <span class="token keyword">constraint</span> 约束名称 <span class="token punctuation">[</span><span class="token keyword">cascade</span><span class="token punctuation">]</span>
</code></pre></div></li></ul></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> timing <span class="token keyword">on</span> 
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token comment">### as select * from ###</span>
</code></pre></div><h2 id="查询时间比较"><a href="#查询时间比较" aria-hidden="true" class="header-anchor">#</a> 查询时间比较</h2> <p>单表查询只查询某列查询时间会小一点， 6万数据少了0.2s</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token comment">###</span>
<span class="token keyword">select</span> col <span class="token keyword">from</span> <span class="token comment">###</span>
</code></pre></div><p>多表查询
子查询</p> <h2 id="pl-sql"><a href="#pl-sql" aria-hidden="true" class="header-anchor">#</a> PL/SQL</h2> <h3 id="四部分"><a href="#四部分" aria-hidden="true" class="header-anchor">#</a> 四部分</h3> <ul><li><p>声明部分：DECLARE</p></li> <li><p>执行部分：BEGIN 至少要有一条语句，哪怕是NULL</p></li> <li><p>异常部分：EXCEPTION</p></li> <li><p>结束部分：END</p></li></ul> <h3 id="变量"><a href="#变量" aria-hidden="true" class="header-anchor">#</a> 变量</h3> <div class="language-plsql extra-class"><pre class="language-plsql"><code><span class="token keyword">DECLARE</span>    							<span class="token operator">/</span><span class="token operator">/</span>声明变量，后为类型<span class="token punctuation">(</span>基本类型，大对象<span class="token punctuation">)</span>
  v_eno <span class="token keyword">number</span><span class="token punctuation">;</span>
  v_ename <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  v_eno emp<span class="token punctuation">.</span>empno<span class="token operator">%</span><span class="token keyword">type</span><span class="token punctuation">;</span>   <span class="token operator">/</span><span class="token operator">/</span> 类型与表中一致
  v_ename emp<span class="token punctuation">.</span>ename<span class="token operator">%</span><span class="token keyword">type</span><span class="token punctuation">;</span>
  v_item emp<span class="token operator">%</span><span class="token keyword">rowtype</span><span class="token punctuation">;</span>
  
  <span class="token keyword">TYPE</span> emp_type <span class="token operator">IS</span> <span class="token keyword">RECORD</span>{
 			XXX XXX<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span>
  }<span class="token punctuation">;</span>
  	
  <span class="token operator">/</span><span class="token operator">/</span> 嵌套表
  <span class="token keyword">TYPE</span> XXX <span class="token operator">is</span> <span class="token keyword">TABLE</span> <span class="token keyword">of</span> <span class="token keyword">number</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  v_XX XXX<span class="token operator">:=</span><span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">,</span><span class="token string">'X'</span><span class="token punctuation">,</span><span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token operator">/</span><span class="token operator">/</span> 可变数组 没写完
  <span class="token keyword">TYPE</span> XXX <span class="token operator">is</span> <span class="token punctuation">(</span>  <span class="token punctuation">)</span> <span class="token keyword">number</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  v_emp emp_type<span class="token punctuation">;</span>
	<span class="token operator">/</span><span class="token operator">/</span> <span class="token operator">%</span><span class="token keyword">ROWTYPE</span>

<span class="token keyword">BEGIN</span>     <span class="token operator">/</span><span class="token operator">/</span> 必须有内容，可以为 <span class="token boolean">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">set</span> serveroutput <span class="token keyword">on</span><span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span>开启打印
  v_eno<span class="token operator">:=</span><span class="token number">30</span><span class="token punctuation">;</span>   
  DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'请输入员工编号:'</span><span class="token punctuation">)</span>
  v_eno<span class="token operator">:=</span><span class="token operator">&amp;</span>sth <span class="token operator">/</span><span class="token operator">/</span> 由键盘键入
  <span class="token keyword">select</span> ename <span class="token keyword">into</span> v_ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno<span class="token operator">=</span>v_eno<span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span> 选择一条到变量
  <span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span> v_emp<span class="token punctuation">;</span>  <span class="token operator">/</span><span class="token operator">/</span> 直接插入集合
  DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX:'</span><span class="token operator">||</span>v_ename<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">print</span>
  
  <span class="token operator">/</span><span class="token operator">/</span> 分支
  <span class="token keyword">If</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
  	<span class="token keyword">then</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  	<span class="token keyword">then</span>
  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
  
  <span class="token keyword">CASE</span>
  		<span class="token keyword">when</span><span class="token punctuation">(</span>条件<span class="token punctuation">)</span>
  				DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX'</span><span class="token punctuation">)</span>
      <span class="token keyword">when</span><span class="token punctuation">(</span>条件<span class="token punctuation">)</span>
  				DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX'</span><span class="token punctuation">)</span>
  
  <span class="token operator">/</span><span class="token operator">/</span> 循环
  <span class="token keyword">Loop</span>
  	DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX'</span><span class="token punctuation">)</span>
  	<span class="token keyword">exit</span> <span class="token keyword">when</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> v_i <span class="token operator">in</span> <span class="token number">1.</span><span class="token number">.3</span> <span class="token keyword">Loop</span>     
  	DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX'</span><span class="token punctuation">)</span>
  <span class="token keyword">end</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
  
  <span class="token operator">/</span><span class="token operator">/</span> 内部程序块
  <span class="token keyword">DEClARE</span>
  	XXX
  <span class="token keyword">BEGIN</span>
  	<span class="token boolean">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">END</span><span class="token punctuation">;</span>
  
  <span class="token operator">/</span><span class="token operator">/</span>异常处理
  
  <span class="token operator">/</span><span class="token operator">/</span>集合
  <span class="token operator">/</span><span class="token operator">/</span>索引表不能进行遍历
<span class="token keyword">END</span><span class="token punctuation">;</span>
</code></pre></div><p>游标</p> <ul><li><p>静态游标</p> <p>​	隐式游标</p> <p>​	显式游标：用户自己定义</p> <p>​		声明</p> <p>​		打开</p> <p>​		取出</p> <p>​		关闭</p> <div class="language-plsql extra-class"><pre class="language-plsql"><code><span class="token keyword">DECLARE</span>
	<span class="token keyword">cursor</span> cur_emp <span class="token operator">is</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
	v_empRow emp<span class="token operator">%</span><span class="token keyword">RowTYPE</span>
<span class="token keyword">BEGIN</span>
	<span class="token keyword">if</span> cur_emp<span class="token operator">%</span><span class="token keyword">isopen</span> <span class="token keyword">then</span>
		<span class="token boolean">NULL</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
  	<span class="token keyword">open</span> cur_emp<span class="token punctuation">;</span>           			<span class="token operator">/</span><span class="token operator">/</span>打开游标
  <span class="token keyword">Fetch</span> cur_emp <span class="token keyword">into</span> v_empRow<span class="token punctuation">;</span>   <span class="token operator">/</span><span class="token operator">/</span>取出数据
  <span class="token operator">/</span><span class="token operator">/</span> 三种循环比较
  <span class="token keyword">while</span> cur_emp<span class="token operator">%</span><span class="token keyword">found</span> <span class="token keyword">Loop</span>      <span class="token operator">/</span><span class="token operator">/</span>判断是否为空
	  DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX:'</span><span class="token operator">||</span>cur_emp<span class="token operator">%</span><span class="token keyword">RowCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token keyword">Fetch</span> cur_emp <span class="token keyword">into</span> v_empRow<span class="token punctuation">;</span>   
  <span class="token keyword">end</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
  
  <span class="token keyword">Loop</span> 
  	<span class="token keyword">Fetch</span> cur_emp <span class="token keyword">into</span> v_empRow<span class="token punctuation">;</span> 
  	<span class="token keyword">exit</span> <span class="token keyword">when</span> cur_emp<span class="token operator">%</span><span class="token keyword">notfound</span><span class="token punctuation">;</span>
  	DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX:'</span><span class="token operator">||</span>cur_emp<span class="token operator">%</span><span class="token keyword">RowCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> emp_row <span class="token operator">in</span> cur_emp <span class="token keyword">Loop</span>      <span class="token operator">/</span><span class="token operator">/</span> 无需声明变量<span class="token punctuation">,</span>无需打开游标
	  DBMS_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'XXXXXXXXXX:'</span><span class="token operator">||</span>emp_row<span class="token operator">%</span><span class="token keyword">RowCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token keyword">Fetch</span> cur_emp <span class="token keyword">into</span> v_empRow<span class="token punctuation">;</span>   
  <span class="token keyword">end</span> <span class="token keyword">Loop</span><span class="token punctuation">;</span>
  
  <span class="token keyword">close</span> cur_emp<span class="token punctuation">;</span>       <span class="token operator">/</span><span class="token operator">/</span> 关闭游标
<span class="token keyword">end</span><span class="token punctuation">;</span>   
</code></pre></div></li> <li><p>REF游标</p></li></ul> <p>子程序</p> <ul><li>过程</li></ul> <div class="language-plsql extra-class"><pre class="language-plsql"><code><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token operator">or</span> <span class="token keyword">replace</span><span class="token punctuation">]</span> <span class="token keyword">procedure</span> 过程名词 <span class="token punctuation">(</span><span class="token punctuation">[</span>参数名词<span class="token punctuation">[</span>参数模式<span class="token punctuation">]</span><span class="token keyword">nocopy</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">as</span> 


<span class="token keyword">begin</span> 


<span class="token keyword">end</span> 
</code></pre></div><ul><li>函数</li></ul> <div class="language-plsql extra-class"><pre class="language-plsql"><code><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">function</span> 函数名<span class="token punctuation">(</span><span class="token punctuation">)</span>  
	<span class="token keyword">return</span> <span class="token keyword">number</span> 
<span class="token keyword">as</span>
<span class="token keyword">begin</span> 
	<span class="token keyword">return</span> 
<span class="token keyword">end</span> 
</code></pre></div><p>包(类， 结构体)</p> <div class="language-plsql extra-class"><pre class="language-plsql"><code><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">package</span> 包名称
<span class="token keyword">as</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>
	<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">package</span> <span class="token keyword">body</span> 包体名
	<span class="token keyword">as</span>
	
	<span class="token keyword">begin</span>
	<span class="token keyword">end</span>；
</code></pre></div><p>触发器  略</p> <p>分布式存储 -》 云计算</p> <h2 id="事务"><a href="#事务" aria-hidden="true" class="header-anchor">#</a> 事务</h2> <h3 id="事务-2"><a href="#事务-2" aria-hidden="true" class="header-anchor">#</a> 事务</h3> <ul><li>原子性</li> <li>一致性</li> <li>隔离性</li> <li>持久性</li></ul> <h3 id="事务结束"><a href="#事务结束" aria-hidden="true" class="header-anchor">#</a> 事务结束</h3> <ul><li>（1）用户执行COMMIT语句提交事务，或者执行ROLLBACK语句撤销了事务；</li> <li>（2）用户执行了一条DDL语句，如CREATE、DROP或ALTER语句；</li> <li>（3）用户执行了一条DCL语句，如GRANT、REVOKE、AUDIT、NOAUDIT等；</li> <li>（4）用户断开与数据库的连接，这时用户当前的事务会被自动提交；</li> <li>（5）执行DML语句失败，这时当前的事务会被自动回退。</li></ul> <h2 id="锁"><a href="#锁" aria-hidden="true" class="header-anchor">#</a> 锁</h2> <h3 id="锁机制"><a href="#锁机制" aria-hidden="true" class="header-anchor">#</a> 锁机制</h3> <ul><li><p>共享锁</p></li> <li><p>独占锁</p></li></ul> <h3 id="死锁"><a href="#死锁" aria-hidden="true" class="header-anchor">#</a> 死锁</h3> <p>Oracle自动进行定期搜索，通过回滚死锁中包含的其中一个语句来解决死锁问题，也就是释放其中一个冲突锁，同时返回一个消息给对应的事务。</p> <h3 id="类型"><a href="#类型" aria-hidden="true" class="header-anchor">#</a> 类型</h3> <ul><li>DML锁
<ul><li>DML锁的目标是保证并行访问的数据完整性，防止同步冲突的DML和DDL操作的破坏性交互。</li> <li>保证表的特定行能够被一个事务更新，同时保证在事务提交之前，不能删除表。</li> <li>DML操作能够在特定的行和整个表这两个不同的层上获取数据。</li> <li>能够获取独占DML锁的语句有：INSERT、UPDATE、DELETE和带有FOR UPDATE子句的SELECT语句</li> <li>DML语句在特定的行上操作需要行层的锁，使用DML语句修改表时需要表锁。</li></ul></li> <li>DDL锁
<ul><li>独占DDL锁：当CREATE、ALTER和DROP等语句用于一个对象时使用该锁。假如另外一个用户保留了任何级别的锁，那么该用户就不能得到表中的独占DDL锁。例如，假如另一个用户在该表上有一个未提交的事务，那么ALTERT TABLE语句会失效。</li> <li>共享DDL锁：当GRANT与CREATE PACKAGE等语句用于一个对象时使用此锁。一个共享DDL锁不能阻止类似的DDL语句或任何DML语句用于一个对象上，但是它能防止另一个用户改变或删除已引用的对象。共享DDL锁还可以在DDL语句执行期间一直维持，直到发生一个隐式的提交。</li> <li>可破的分析DDL锁：库高速缓存区中语句或PL/SQL对象有一个用于它所引用的每一个对象的锁。假如被引用的对象改变了，可破的分析DDL锁会持续。假如对象改变了，它会检查语句是否应失效。</li></ul></li> <li>内部锁
<ul><li>内部锁包含内部数据库和内存结构。对用户来说，它们是不可访问的，因为用户不需要控制它们的发生。</li></ul></li></ul> <h2 id="权限"><a href="#权限" aria-hidden="true" class="header-anchor">#</a> 权限</h2> <h3 id="用户"><a href="#用户" aria-hidden="true" class="header-anchor">#</a> 用户</h3> <h4 id="创建用户"><a href="#创建用户" aria-hidden="true" class="header-anchor">#</a> 创建用户</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span>                       		<span class="token comment">/*将要创建的用户名*/</span>
   <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> {<span class="token operator">&lt;</span>密码<span class="token operator">&gt;</span> <span class="token operator">|</span> EXTERNALLLY <span class="token operator">|</span> 
        GLOBALLY <span class="token keyword">AS</span> <span class="token string">'&lt;外部名称&gt;'</span> }<span class="token punctuation">]</span>           		<span class="token comment">/*表明Oracle如何验证用户*/</span>
   <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>默认表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>     	<span class="token comment">/*标识用户所创建对象的默认表空间*/</span>
   <span class="token punctuation">[</span><span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>临时表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>      <span class="token comment">/*标识用户的临时段的表空间*/</span>
   <span class="token comment">/*用户规定的表空间存储对象，最多可达到这个定额规定的总尺寸*/</span>
   <span class="token punctuation">[</span>QUOTA <span class="token operator">&lt;</span>数字值<span class="token operator">&gt;</span> K <span class="token operator">|</span> <span class="token operator">&lt;</span>数字值<span class="token operator">&gt;</span> M <span class="token operator">|</span> UNLIMTED <span class="token keyword">ON</span> <span class="token operator">&lt;</span>表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>
   <span class="token punctuation">[</span>PROFILE <span class="token operator">&lt;</span>概要文件名<span class="token operator">&gt;</span><span class="token punctuation">]</span>                       	<span class="token comment">/*将指定的概要文件分配给用户*/</span>
   <span class="token punctuation">[</span>PASSWORD EXPIRE<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>ACCOUNT {<span class="token keyword">LOCK</span> <span class="token operator">|</span> NULOCK}<span class="token punctuation">]</span>               	<span class="token comment">/*账户是否锁定*/</span>
</code></pre></div><h4 id="修改用户"><a href="#修改用户" aria-hidden="true" class="header-anchor">#</a> 修改用户</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> 
   <span class="token punctuation">[</span>IDENTIFIED <span class="token keyword">BY</span> {<span class="token operator">&lt;</span>密码<span class="token operator">&gt;</span> <span class="token operator">|</span> EXTERNALLLY <span class="token operator">|</span> 
        GLOBALLY <span class="token keyword">AS</span> <span class="token string">'&lt;外部名称&gt;'</span> }<span class="token punctuation">]</span> 
   <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>默认表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>   
   <span class="token punctuation">[</span><span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>临时表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>
   <span class="token punctuation">[</span>QUOTA <span class="token operator">&lt;</span>数字值<span class="token operator">&gt;</span> K <span class="token operator">|</span> <span class="token operator">&lt;</span>数字值<span class="token operator">&gt;</span> M <span class="token operator">|</span> UNLIMTED <span class="token keyword">ON</span> <span class="token operator">&lt;</span>表空间名<span class="token operator">&gt;</span><span class="token punctuation">]</span>
   <span class="token punctuation">[</span>PROFILE <span class="token operator">&lt;</span>概要文件名<span class="token operator">&gt;</span><span class="token punctuation">]</span>
   <span class="token punctuation">[</span>PASSWORD EXPIRE<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>ACCOUNT {<span class="token keyword">LOCK</span> <span class="token operator">|</span> NULOCK}<span class="token punctuation">]</span> 

</code></pre></div><h4 id="删除用户"><a href="#删除用户" aria-hidden="true" class="header-anchor">#</a> 删除用户</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="权限管理"><a href="#权限管理" aria-hidden="true" class="header-anchor">#</a> 权限管理</h3> <h4 id="系统权限"><a href="#系统权限" aria-hidden="true" class="header-anchor">#</a> 系统权限</h4> <p>该权限是指在系统级控制数据库的存取和使用的机制，即执行某种SQL语句的能力。例如，启动、停止数据库，修改数据库参数，连接到数据库，以及创建、删除、更改模式对象（如表、视图、索引、过程等）等权限。系统权限是针对用户而设置的，用户必须被授予相应的系统权限才可以连接到数据库中进行相应的操作。</p> <p>查询系统权限</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> SYSTEM_PRIVILEGE_MAP<span class="token punctuation">;</span>
</code></pre></div><h5 id="分类"><a href="#分类" aria-hidden="true" class="header-anchor">#</a> 分类</h5> <ul><li>数据库维护权限：对于数据库管理员，需要创建表空间、修改数据库结构、创建用户、修改用户权限等进行数据库维护的操作。</li> <li>数据库模式对象权限：对数据库开发人员而言，只需要了解操作数据库对象的权限，如创建表、创建视图等权限</li> <li>ANY权限：系统权限中还有一种权限是ANY，具有ANY权限表示可以在任何用户模式中进行操作。例如，具有CREATE ANY TABLE系统权限的用户可以在任何用户模式中创建表。与此相对应，不具有ANY权限表示只能在自己的模式中进行操作。一般情况下，应该给数据库管理员授予ANY权限，以便其管理所有用户的模式对象。但不应该将ANY权限授予普通用户，以防其影响其他用户的工作。</li></ul> <h5 id="权限的授予"><a href="#权限的授予" aria-hidden="true" class="header-anchor">#</a> 权限的授予</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token operator">&lt;</span>系统权限名<span class="token operator">&gt;</span> <span class="token keyword">TO</span> {<span class="token keyword">PUBLIC</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>…n<span class="token punctuation">]</span>}
   <span class="token punctuation">[</span> <span class="token keyword">WITH</span> ADMIN <span class="token keyword">OPTION</span><span class="token punctuation">]</span>
</code></pre></div><h5 id="权限的收回"><a href="#权限的收回" aria-hidden="true" class="header-anchor">#</a> 权限的收回</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token operator">&lt;</span>系统权限名<span class="token operator">&gt;</span> <span class="token keyword">FROM</span> {<span class="token keyword">PUBLIC</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>…n<span class="token punctuation">]</span>}<span class="token punctuation">;</span>
</code></pre></div><h4 id="对象权限"><a href="#对象权限" aria-hidden="true" class="header-anchor">#</a> 对象权限</h4> <p>该权限是指在对象级控制数据库的存取和使用的机制，即访问其他用户模式对象的能力。例如，用户可以存取哪个用户模式中的哪个对象，能对该对象进行查询、插入、更新操作等。对象权限一般是针对用户模式对象的。对象权限是用户之间的表、视图等模式对象的相互存取权限。例如，以用户“SCOTT”登录到数据库，可以查询该用户模式中的表XSB，但是如果以用户“SYSTEM”登录数据库则不可以查询表XSB，因为表XSB不属于SYSTEM用户，并且SYSTEM用户没有被授予查询XSB表的权限</p> <h5 id="种类"><a href="#种类" aria-hidden="true" class="header-anchor">#</a> 种类</h5> <ul><li>（1）SELECT：读取表、视图、序列中的行。</li> <li>（2）UPDATE：更新表、视图和序列中的行。</li> <li>（3）DELETE：删除表、视图中的数据。</li> <li>（4）INSERT：向表和视图中插入数据。</li> <li>（5）EXECUTE：执行类型、函数、包和过程。</li> <li>（6）READ：读取数据字典中的数据。</li> <li>（7）INDEX：生成索引。</li> <li>（8）PEFERENCES：生成外键。</li> <li>（9）ALTER：修改表、序列、同义词中的结构。</li></ul> <h5 id="系统权限的授予"><a href="#系统权限的授予" aria-hidden="true" class="header-anchor">#</a> 系统权限的授予</h5> <h5 id="系统权限的收回"><a href="#系统权限的收回" aria-hidden="true" class="header-anchor">#</a> 系统权限的收回</h5> <h4 id="安全特性"><a href="#安全特性" aria-hidden="true" class="header-anchor">#</a> 安全特性</h4> <p>表安全</p> <p>视图安全</p> <p>过程安全</p> <p>类型安全</p> <h3 id="角色管理"><a href="#角色管理" aria-hidden="true" class="header-anchor">#</a> 角色管理</h3> <h4 id="创建用户角色"><a href="#创建用户角色" aria-hidden="true" class="header-anchor">#</a> 创建用户角色</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> ROLE <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> 
   <span class="token punctuation">[</span><span class="token operator">NOT</span> IDENTIFIED<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>IDENTIFIED {<span class="token keyword">BY</span> <span class="token operator">&lt;</span>密码<span class="token operator">&gt;</span>∣EXTERNALLY∣GLOBALLY}<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="修改角色"><a href="#修改角色" aria-hidden="true" class="header-anchor">#</a> 修改角色</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> ROLE <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span>
   <span class="token punctuation">[</span> <span class="token operator">NOT</span> IDENTIFIED <span class="token punctuation">]</span>
   <span class="token punctuation">[</span> IDENTIFIED {<span class="token keyword">BY</span> <span class="token operator">&lt;</span>密码<span class="token operator">&gt;</span>∣EXTERNALLY∣GLOBALLY} <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="给角色授予和取消权限"><a href="#给角色授予和取消权限" aria-hidden="true" class="header-anchor">#</a> 给角色授予和取消权限</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">CREATE</span> <span class="token keyword">ANY</span> <span class="token keyword">TABLE</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">ANY</span> <span class="token keyword">VIEW</span>
   <span class="token keyword">TO</span> ACCOUNT_CREATE<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token keyword">CREATE</span> <span class="token keyword">ANY</span> <span class="token keyword">VIEW</span>
   <span class="token keyword">FROM</span> ACCOUNT_CREATE<span class="token punctuation">;</span>
</code></pre></div><h4 id="将角色授予用户"><a href="#将角色授予用户" aria-hidden="true" class="header-anchor">#</a> 将角色授予用户</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>…n<span class="token punctuation">]</span> 
   <span class="token keyword">TO</span> {<span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>}
   <span class="token punctuation">[</span><span class="token keyword">WITH</span> ADMIN <span class="token keyword">OPTION</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="启用和禁用角色"><a href="#启用和禁用角色" aria-hidden="true" class="header-anchor">#</a> 启用和禁用角色</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> ROLE
   {  <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token punctuation">[</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token operator">&lt;</span>密码<span class="token operator">&gt;</span> <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span>…n<span class="token punctuation">]</span>
      <span class="token operator">|</span> <span class="token keyword">ALL</span> <span class="token punctuation">[</span> <span class="token keyword">EXCEPT</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">,</span>…n <span class="token punctuation">]</span> <span class="token punctuation">]</span>
      <span class="token operator">|</span> NONE
   } <span class="token punctuation">;</span>
</code></pre></div><h4 id="收回用户的角色"><a href="#收回用户的角色" aria-hidden="true" class="header-anchor">#</a> 收回用户的角色</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span>…n<span class="token punctuation">]</span>
   <span class="token keyword">FROM</span> {<span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>角色名<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword">PUBLIC</span>}
<span class="token keyword">PUBLIC</span>表示公共用户组。
</code></pre></div><h3 id="概要文件和数据字典视图"><a href="#概要文件和数据字典视图" aria-hidden="true" class="header-anchor">#</a> 概要文件和数据字典视图</h3> <h4 id="创建概要文件"><a href="#创建概要文件" aria-hidden="true" class="header-anchor">#</a> 创建概要文件</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> PROFILE <span class="token operator">&lt;</span>概要文件名<span class="token operator">&gt;</span> <span class="token keyword">LIMIT</span>
   <span class="token operator">&lt;</span>限制参数<span class="token operator">&gt;</span>∣<span class="token operator">&lt;</span>口令参数<span class="token operator">&gt;</span>
</code></pre></div><h4 id="修改概要文件"><a href="#修改概要文件" aria-hidden="true" class="header-anchor">#</a> 修改概要文件</h4> <h4 id="数据字典视图"><a href="#数据字典视图" aria-hidden="true" class="header-anchor">#</a> 数据字典视图</h4> <h3 id="审计"><a href="#审计" aria-hidden="true" class="header-anchor">#</a> 审计</h3> <h4 id="登录审计"><a href="#登录审计" aria-hidden="true" class="header-anchor">#</a> 登录审计</h4> <h4 id="操作审计"><a href="#操作审计" aria-hidden="true" class="header-anchor">#</a> 操作审计</h4> <h4 id="对象审计"><a href="#对象审计" aria-hidden="true" class="header-anchor">#</a> 对象审计</h4> <h4 id="权限审计"><a href="#权限审计" aria-hidden="true" class="header-anchor">#</a> 权限审计</h4></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.c7910e17.js" defer></script><script src="/assets/js/18.5ade4bbb.js" defer></script>
  </body>
</html>
